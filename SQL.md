# MySQL
## Примеры SQL запросов
## Таблица
### Создание таблицы
***Создадим таблицу `book`***</br>
***Со столбцами:*** </br>
`book_id` - ключевой столбец с автоматической генерацией значения,</br>
`title` - названиями книг с длиной строки 50 символов,</br>
`author` - авторы с длиной строки 30 символов,</br>
`price` - цена, вещественное число с максимально длинной числа 8 и 2 символа после запятой</br>
`amount` - количество книг на складе, целое число
```MySQL
    CREATE TABLE book(
    book_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(50),
    author VARCHAR(30),
    price DECIMAL(8, 2),
    amount INT
);
```
### Вставка записи в таблицу
***Добавим строки в таблицу `book`***</br>
```MySQL
    INSERT INTO book (title, author, price, amount)
    VALUES
      ('Мастер и Маргарита', 'Булгаков М.А.', 670.99, 3),
      ('Белая гвардия', 'Булгаков М.А.', 540.50, 5),
      ('Идиот', 'Достоевский Ф.М.', 460.00, 10),
      ('Братья Карамазовы', 'Достоевский Ф.М.', 799.01, 2),
      ('Стихотворения и поэмы', 'Есенин С.А.', 650.00, 15);
 ```
## Выборка данных
### Выборка всех данных из таблицы
```MySQL
    SELECT * FROM book;
 ```
 ***Результат:***</br>
![2022-05-19_17-11-30](https://user-images.githubusercontent.com/40222971/169314643-8caf59c8-7bd9-43c2-8752-219eea4ee429.png)
### Выборка отдельных столбцов
***Запрос:***
```MySQL
    SELECT author, title, price FROM book;
 ```
 ***Результат:***</br>
 ![2022-05-19_17-15-53](https://user-images.githubusercontent.com/40222971/169315468-ffce4296-bdde-46b3-a063-1a14d725ef3c.png)
 ### Выборка новых столбцов и присвоение им новых имен
 ***Запрос:***
 ```MySQL
    SELECT title AS Название, author AS Автор  FROM book;
 ```
 ***Результат:***</br>
 ![2022-05-19_17-20-10](https://user-images.githubusercontent.com/40222971/169316685-3e311e00-107a-4b0b-9633-29a80a6175b4.png)
### Выборка данных с созданием вычисляемого столбца
 Посчитаем стоимость упаковки для каждой книги. При условии что для упаковки каждой книги требуется один лист бумаги, цена которого 1 рубль 65 копеек. Отдельным столбцом выделим стоимость упаковки.</br>
***Запрос:***
```MySQL
    SELECT title, amount, amount * 1.65 AS pack FROM book;
```
***Результат:***</br>
![2022-05-19_17-25-48](https://user-images.githubusercontent.com/40222971/169318773-c31fcb90-3bf6-4f71-934f-193896d7a642.png)
### Выборка данных, вычисляемые столбцы, логические функции
Поднимим цену книг Булгакова на 10%, а цену книг Есенина - на 5%. Напишем запрос, куда включим автора, название книги и новую цену, последний столбец назавём `new_price`. Значение округлим до двух знаков после запятой.</br>
***Запрос:***
```MySQL
    SELECT author, title,
    ROUND (IF(author =  'Булгаков М.А.',price + price*0.1,IF(author = 'Есенин С.А.', price + price * 0.05, price)),2)
    AS new_price FROM book;
```
***Результат:***</br>
![2022-05-19_17-31-34](https://user-images.githubusercontent.com/40222971/169320944-5490be89-5dbe-4600-b816-ba2e5ef5b739.png)
### Выборка данных по условию
Выведем автора, название  и цены тех книг, количество которых меньше 10.</br>
***Запрос:***
```MySQL
    SELECT author, title, price FROM book WHERE amount < 10;
```
***Результат:***</br>
![2022-05-19_17-36-09](https://user-images.githubusercontent.com/40222971/169322457-8288fb95-540c-4398-a544-b23c145a72f2.png)
### Выборка данных, логические операции
Выведем название, автора,  цену  и количество всех книг, цена которых меньше 500 или больше 600, а стоимость всех экземпляров этих книг больше или равна 5000.</br>
***Запрос:***
```MySQL
    SELECT title, author, price, amount
    FROM book
    WHERE (price < 500 OR price > 600) AND price*amount >= 5000;
```
***Результат:***</br>
![2022-05-19_18-06-17](https://user-images.githubusercontent.com/40222971/169329090-41cbbf0a-b343-4669-b94e-0b07840e3fc2.png)
### Выборка данных, операторы BETWEEN, IN
Выведем название и авторов тех книг, цены которых принадлежат интервалу от 540.50 до 800 (включая границы),  а количество или 2, или 3, или 5, или 7.</br>
***Запрос:***
```MySQL
    SELECT title, author
    FROM book
    WHERE (price BETWEEN 540.50 AND 800) AND amount IN (2, 3, 5, 7);
```
***Результат:***</br>
![2022-05-19_18-12-42](https://user-images.githubusercontent.com/40222971/169331153-6e2db37d-6d95-432a-8eed-bf8dba0aa4f4.png)
### Выборка данных с сортировкой (ORDER BY)
Выведем  автора и название  книг, количество которых принадлежит интервалу от 2 до 14 (включая границы). Информацию  отсортируем сначала по авторам (в обратном алфавитном порядке), а затем по названиям книг (по алфавиту).</br>
***Запрос:***
```MySQL
    SELECT author, title
    FROM book
    WHERE amount
    BETWEEN 2 AND 14
    ORDER BY 1 DESC,2;
```
***Результат:***</br>
![2022-05-19_18-18-52](https://user-images.githubusercontent.com/40222971/169333382-b89226ab-bc6c-4d3a-907b-6e787ddee305.png)
### Выборка данных, оператор LIKE
Выведем название и автора тех книг, название которых состоит из двух и более слов, а инициалы автора содержат букву «С». Будем считать, что в названии слова отделяются друг от друга пробелами и не содержат знаков препинания, между фамилией автора и инициалами обязателен пробел, инициалы записываются без пробела в формате: буква, точка, буква, точка. Информацию отсортируем по названию книги в алфавитном порядке.</br>
***Запрос:***
```MySQL
    SELECT title, author
    FROM book
    WHERE title LIKE "%_% %_%" AND author LIKE "%С.%"
    ORDER BY title;
```
***Результат:***</br>
![2022-05-19_20-04-43](https://user-images.githubusercontent.com/40222971/169357530-1fbea54e-2846-4dce-a780-00692f4c5fab.png)
## Запросы, групповые операции
### Выбор уникальных элементов столбца
Выбререм различных авторов, книги которых хранятся в таблице `book`с помощью оператора `DISTINCT`.</br>
***Запрос:***
```MySQL
    SELECT DISTINCT author
    FROM book;
```
***Результат:***</br>
![2022-05-19_20-11-44](https://user-images.githubusercontent.com/40222971/169358590-c732f3c2-d479-44b2-b811-100126eb581c.png)
ОтобTHTV уникальные элементы столбца `amount` таблицы `book` при помощи `GROUP BY`.</br>
***Запрос:***
```MySQL
    SELECT amount
    FROM book
    GROUP BY amount;
```
***Результат:***</br>
![2022-05-19_20-16-11](https://user-images.githubusercontent.com/40222971/169359279-f90abb7f-da1f-457f-9450-c133aeb7c685.png)
### Выборка данных, групповые функции SUM и COUNT
Посчитаем, количество различных книг и количество экземпляров книг каждого автора , хранящихся на складе.  Столбцы назвавём `Автор`, `Различных_книг` и `Количество_экземпляров` соответственно.</br>
***Запрос:***
```MySQL
    SELECT author AS Автор,
           count(amount) AS Различных_книг,
           sum(amount) AS Количество_экземпляров
    FROM book
    GROUP BY author;
```
***Результат:***</br>
![2022-05-19_20-23-36](https://user-images.githubusercontent.com/40222971/169360558-44f55d1e-731a-4a8f-ad40-b3ca359cfdda.png)
### Выборка данных, групповые функции MIN, MAX и AVG
Выведем фамилию и инициалы автора, минимальную, максимальную и среднюю цену книг каждого автора . Вычисляемые столбцы назавём `Минимальная_цена`, `Максимальная_цена` и `Средняя_цена` соответственно.</br>
***Запрос:***
```MySQL
    SELECT author,
           MIN(price) AS Минимальная_цена,
           MAX(price) AS Максимальная_цена,
           AVG(price) AS Средняя_цена
    FROM book
    GROUP BY author;
```
***Результат:***</br>
![2022-05-19_20-37-29](https://user-images.githubusercontent.com/40222971/169363000-a10b5bde-ed79-40e4-bca0-a47d6f606349.png)

